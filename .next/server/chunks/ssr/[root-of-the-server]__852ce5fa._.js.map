{"version":3,"sources":["turbopack:///[project]/lib/db.ts","turbopack:///[project]/components/HomeClient.tsx/__nextjs-internal-proxy.mjs","turbopack:///[project]/app/page.tsx","turbopack:///[project]/node_modules/lucide-react/src/icons/map-pin.ts"],"sourcesContent":["import fs from 'fs';\r\nimport path from 'path';\r\n\r\nexport interface Product {\r\n  id: string;\r\n  name: string;\r\n  slug: string;\r\n  description: string;\r\n  price: number;\r\n  category: string;\r\n  inventory: number;\r\n  lastUpdated: string;\r\n}\r\n\r\nconst PRODUCTS_FILE = path.join(process.cwd(), 'data', 'products.json');\r\n\r\n\r\nfunction ensureDataDirectory() {\r\n  const dir = path.dirname(PRODUCTS_FILE);\r\n  if (!fs.existsSync(dir)) {\r\n    fs.mkdirSync(dir, { recursive: true });\r\n  }\r\n}\r\n\r\n/**\r\n * Read all products from JSON file\r\n */\r\nexport async function getAllProducts(): Promise<Product[]> {\r\n  try {\r\n    ensureDataDirectory();\r\n    if (!fs.existsSync(PRODUCTS_FILE)) {\r\n      return [];\r\n    }\r\n    const data = fs.readFileSync(PRODUCTS_FILE, 'utf-8');\r\n    return JSON.parse(data);\r\n  } catch (error) {\r\n    console.error('Error reading products:', error);\r\n    return [];\r\n  }\r\n}\r\n\r\n/**\r\n * Get a single product by slug\r\n */\r\nexport async function getProductBySlug(slug: string): Promise<Product | null> {\r\n  const products = await getAllProducts();\r\n  return products.find((p) => p.slug === slug) || null;\r\n}\r\n\r\n/**\r\n * Get a single product by ID\r\n */\r\nexport async function getProductById(id: string): Promise<Product | null> {\r\n  const products = await getAllProducts();\r\n  return products.find((p) => p.id === id) || null;\r\n}\r\n\r\n/**\r\n * Add a new product\r\n */\r\nexport async function addProduct(product: Omit<Product, 'id' | 'lastUpdated'>): Promise<Product> {\r\n  ensureDataDirectory();\r\n  const products = await getAllProducts();\r\n  const newId = (Math.max(...products.map((p) => parseInt(p.id)), 0) + 1).toString();\r\n  const newProduct: Product = {\r\n    ...product,\r\n    id: newId,\r\n    lastUpdated: new Date().toISOString(),\r\n  };\r\n  products.push(newProduct);\r\n  fs.writeFileSync(PRODUCTS_FILE, JSON.stringify(products, null, 2));\r\n  return newProduct;\r\n}\r\n\r\n/**\r\n * Update an existing product\r\n */\r\nexport async function updateProduct(id: string, updates: Partial<Omit<Product, 'id'>>): Promise<Product | null> {\r\n  ensureDataDirectory();\r\n  const products = await getAllProducts();\r\n  const index = products.findIndex((p) => p.id === id);\r\n  if (index === -1) return null;\r\n\r\n  products[index] = {\r\n    ...products[index],\r\n    ...updates,\r\n    id: products[index].id, // Ensure ID doesn't change\r\n    lastUpdated: new Date().toISOString(),\r\n  };\r\n\r\n  fs.writeFileSync(PRODUCTS_FILE, JSON.stringify(products, null, 2));\r\n  return products[index];\r\n}\r\n\r\n/**\r\n * Get inventory statistics\r\n */\r\nexport async function getInventoryStats() {\r\n  const products = await getAllProducts();\r\n  const lowStockThreshold = 50;\r\n\r\n  return {\r\n    totalProducts: products.length,\r\n    totalInventory: products.reduce((sum, p) => sum + p.inventory, 0),\r\n    lowStockProducts: products.filter((p) => p.inventory < lowStockThreshold),\r\n    outOfStockProducts: products.filter((p) => p.inventory === 0),\r\n    categories: [...new Set(products.map((p) => p.category))],\r\n  };\r\n}","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/components/HomeClient.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/HomeClient.tsx\",\n    \"default\",\n);\n","import { getAllProducts } from '@/lib/db';\r\nimport HomeClient from '@/components/HomeClient';\r\nimport { MapPin } from 'lucide-react';\r\n\r\n\r\nexport const revalidate = 3600; // Revalidate every hour (optional ISR)\r\n\r\nexport async function generateMetadata() {\r\n  return {\r\n    title: 'Home - EcomStore',\r\n    description: 'Browse our collection of quality products',\r\n    openGraph: {\r\n      title: 'EcomStore - Your Online Marketplace',\r\n      description: 'Browse our collection of quality products',\r\n    },\r\n  };\r\n}\r\n\r\nexport default async function Home() {\r\n  // Fetch data at build time\r\n  const products = await getAllProducts();\r\n\r\n  return (\r\n    <div className=\"container-custom py-12\">\r\n      {/* Hero Section */}\r\n      <div className=\"mb-12 text-center\">\r\n        <h1 className=\"text-4xl md:text-5xl font-bold text-gray-900 mb-4\">\r\n          Welcome to <span className=\"text-indigo-600\">EcomStore</span>\r\n        </h1>\r\n        <p className=\"text-xl text-gray-600 mb-8\">\r\n          Discover premium products with cutting-edge rendering technology\r\n        </p>\r\n        <div className=\"inline-block bg-blue-50 border border-blue-200 rounded-lg p-4 text-sm text-blue-800 flex items-center gap-2\">\r\n          <div className=\"flex-shrink-0\">\r\n            <MapPin size={18} />\r\n          </div>\r\n          <span><strong>This page uses SSG:</strong> Pre-rendered at build time with client-side filtering</span>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Products Grid with Client-side Filtering */}\r\n      <HomeClient products={products} />\r\n    </div>\r\n  );\r\n}","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0',\n      key: '1r0f0z',\n    },\n  ],\n  ['circle', { cx: '12', cy: '10', r: '3', key: 'ilqhr7' }],\n];\n\n/**\n * @component @name MapPin\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjAgMTBjMCA0Ljk5My01LjUzOSAxMC4xOTMtNy4zOTkgMTEuNzk5YTEgMSAwIDAgMS0xLjIwMiAwQzkuNTM5IDIwLjE5MyA0IDE0Ljk5MyA0IDEwYTggOCAwIDAgMSAxNiAwIiAvPgogIDxjaXJjbGUgY3g9IjEyIiBjeT0iMTAiIHI9IjMiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/map-pin\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst MapPin = createLucideIcon('map-pin', __iconNode);\n\nexport default MapPin;\n"],"names":[],"mappings":"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","ignoreList":[1,3]}