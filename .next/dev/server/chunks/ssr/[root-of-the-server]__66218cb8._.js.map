{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///U:/ecomerce-web/lib/db.ts"],"sourcesContent":["import fs from 'fs';\r\nimport path from 'path';\r\n\r\nexport interface Product {\r\n  id: string;\r\n  name: string;\r\n  slug: string;\r\n  description: string;\r\n  price: number;\r\n  category: string;\r\n  inventory: number;\r\n  lastUpdated: string;\r\n}\r\n\r\nconst PRODUCTS_FILE = path.join(process.cwd(), 'data', 'products.json');\r\n\r\n\r\nfunction ensureDataDirectory() {\r\n  const dir = path.dirname(PRODUCTS_FILE);\r\n  if (!fs.existsSync(dir)) {\r\n    fs.mkdirSync(dir, { recursive: true });\r\n  }\r\n}\r\n\r\n/**\r\n * Read all products from JSON file\r\n */\r\nexport async function getAllProducts(): Promise<Product[]> {\r\n  try {\r\n    ensureDataDirectory();\r\n    if (!fs.existsSync(PRODUCTS_FILE)) {\r\n      return [];\r\n    }\r\n    const data = fs.readFileSync(PRODUCTS_FILE, 'utf-8');\r\n    return JSON.parse(data);\r\n  } catch (error) {\r\n    console.error('Error reading products:', error);\r\n    return [];\r\n  }\r\n}\r\n\r\n/**\r\n * Get a single product by slug\r\n */\r\nexport async function getProductBySlug(slug: string): Promise<Product | null> {\r\n  const products = await getAllProducts();\r\n  return products.find((p) => p.slug === slug) || null;\r\n}\r\n\r\n/**\r\n * Get a single product by ID\r\n */\r\nexport async function getProductById(id: string): Promise<Product | null> {\r\n  const products = await getAllProducts();\r\n  return products.find((p) => p.id === id) || null;\r\n}\r\n\r\n/**\r\n * Add a new product\r\n */\r\nexport async function addProduct(product: Omit<Product, 'id' | 'lastUpdated'>): Promise<Product> {\r\n  ensureDataDirectory();\r\n  const products = await getAllProducts();\r\n  const newId = (Math.max(...products.map((p) => parseInt(p.id)), 0) + 1).toString();\r\n  const newProduct: Product = {\r\n    ...product,\r\n    id: newId,\r\n    lastUpdated: new Date().toISOString(),\r\n  };\r\n  products.push(newProduct);\r\n  fs.writeFileSync(PRODUCTS_FILE, JSON.stringify(products, null, 2));\r\n  return newProduct;\r\n}\r\n\r\n/**\r\n * Update an existing product\r\n */\r\nexport async function updateProduct(id: string, updates: Partial<Omit<Product, 'id'>>): Promise<Product | null> {\r\n  ensureDataDirectory();\r\n  const products = await getAllProducts();\r\n  const index = products.findIndex((p) => p.id === id);\r\n  if (index === -1) return null;\r\n\r\n  products[index] = {\r\n    ...products[index],\r\n    ...updates,\r\n    id: products[index].id, // Ensure ID doesn't change\r\n    lastUpdated: new Date().toISOString(),\r\n  };\r\n\r\n  fs.writeFileSync(PRODUCTS_FILE, JSON.stringify(products, null, 2));\r\n  return products[index];\r\n}\r\n\r\n/**\r\n * Get inventory statistics\r\n */\r\nexport async function getInventoryStats() {\r\n  const products = await getAllProducts();\r\n  const lowStockThreshold = 50;\r\n\r\n  return {\r\n    totalProducts: products.length,\r\n    totalInventory: products.reduce((sum, p) => sum + p.inventory, 0),\r\n    lowStockProducts: products.filter((p) => p.inventory < lowStockThreshold),\r\n    outOfStockProducts: products.filter((p) => p.inventory === 0),\r\n    categories: [...new Set(products.map((p) => p.category))],\r\n  };\r\n}"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA;AACA;;;AAaA,MAAM,gBAAgB,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,QAAQ;AAGvD,SAAS;IACP,MAAM,MAAM,4GAAI,CAAC,OAAO,CAAC;IACzB,IAAI,CAAC,wGAAE,CAAC,UAAU,CAAC,MAAM;QACvB,wGAAE,CAAC,SAAS,CAAC,KAAK;YAAE,WAAW;QAAK;IACtC;AACF;AAKO,eAAe;IACpB,IAAI;QACF;QACA,IAAI,CAAC,wGAAE,CAAC,UAAU,CAAC,gBAAgB;YACjC,OAAO,EAAE;QACX;QACA,MAAM,OAAO,wGAAE,CAAC,YAAY,CAAC,eAAe;QAC5C,OAAO,KAAK,KAAK,CAAC;IACpB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,2BAA2B;QACzC,OAAO,EAAE;IACX;AACF;AAKO,eAAe,iBAAiB,IAAY;IACjD,MAAM,WAAW,MAAM;IACvB,OAAO,SAAS,IAAI,CAAC,CAAC,IAAM,EAAE,IAAI,KAAK,SAAS;AAClD;AAKO,eAAe,eAAe,EAAU;IAC7C,MAAM,WAAW,MAAM;IACvB,OAAO,SAAS,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,OAAO;AAC9C;AAKO,eAAe,WAAW,OAA4C;IAC3E;IACA,MAAM,WAAW,MAAM;IACvB,MAAM,QAAQ,CAAC,KAAK,GAAG,IAAI,SAAS,GAAG,CAAC,CAAC,IAAM,SAAS,EAAE,EAAE,IAAI,KAAK,CAAC,EAAE,QAAQ;IAChF,MAAM,aAAsB;QAC1B,GAAG,OAAO;QACV,IAAI;QACJ,aAAa,IAAI,OAAO,WAAW;IACrC;IACA,SAAS,IAAI,CAAC;IACd,wGAAE,CAAC,aAAa,CAAC,eAAe,KAAK,SAAS,CAAC,UAAU,MAAM;IAC/D,OAAO;AACT;AAKO,eAAe,cAAc,EAAU,EAAE,OAAqC;IACnF;IACA,MAAM,WAAW,MAAM;IACvB,MAAM,QAAQ,SAAS,SAAS,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;IACjD,IAAI,UAAU,CAAC,GAAG,OAAO;IAEzB,QAAQ,CAAC,MAAM,GAAG;QAChB,GAAG,QAAQ,CAAC,MAAM;QAClB,GAAG,OAAO;QACV,IAAI,QAAQ,CAAC,MAAM,CAAC,EAAE;QACtB,aAAa,IAAI,OAAO,WAAW;IACrC;IAEA,wGAAE,CAAC,aAAa,CAAC,eAAe,KAAK,SAAS,CAAC,UAAU,MAAM;IAC/D,OAAO,QAAQ,CAAC,MAAM;AACxB;AAKO,eAAe;IACpB,MAAM,WAAW,MAAM;IACvB,MAAM,oBAAoB;IAE1B,OAAO;QACL,eAAe,SAAS,MAAM;QAC9B,gBAAgB,SAAS,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,EAAE,SAAS,EAAE;QAC/D,kBAAkB,SAAS,MAAM,CAAC,CAAC,IAAM,EAAE,SAAS,GAAG;QACvD,oBAAoB,SAAS,MAAM,CAAC,CAAC,IAAM,EAAE,SAAS,KAAK;QAC3D,YAAY;eAAI,IAAI,IAAI,SAAS,GAAG,CAAC,CAAC,IAAM,EAAE,QAAQ;SAAG;IAC3D;AACF","debugId":null}},
    {"offset": {"line": 120, "column": 0}, "map": {"version":3,"sources":["file:///U:/ecomerce-web/app/dashboard/page.tsx"],"sourcesContent":["import { getInventoryStats, getAllProducts } from '@/lib/db';\r\nimport { BarChart3, Package, AlertTriangle, AlertCircle, TrendingUp } from 'lucide-react';\r\n\r\n/**\r\n * INVENTORY DASHBOARD - SSR (Server-Side Rendering)\r\n * \r\n * - Data is fetched on every request using dynamic rendering\r\n * - No caching - always shows fresh, real-time data\r\n * - HTML is generated server-side for each request\r\n * \r\n * Key Characteristics:\r\n * - No revalidate parameter = dynamic rendering\r\n * - Always calls server functions at request time\r\n * - Perfect for data that changes frequently\r\n * \r\n * Benefits:\r\n * - Always up-to-date information\r\n * - Protected endpoints for admin data\r\n * - Real-time statistics and inventory\r\n * \r\n * Trade-offs:\r\n * - Slower than static pages (server processing per request)\r\n * - Can't scale as easily without caching layer\r\n * - Better suited for admin/authenticated areas\r\n */\r\n\r\nexport const dynamic = 'force-dynamic'; // Ensure dynamic rendering\r\n\r\nexport async function generateMetadata() {\r\n  return {\r\n    title: 'Dashboard - EcomStore Admin',\r\n    description: 'Real-time inventory dashboard with live statistics',\r\n    robots: 'noindex, nofollow', // Don't index admin pages\r\n  };\r\n}\r\n\r\nexport default async function DashboardPage() {\r\n  const stats = await getInventoryStats();\r\n  const products = await getAllProducts();\r\n\r\n  const topProducts = products\r\n    .sort((a, b) => b.price * b.inventory - a.price * a.inventory)\r\n    .slice(0, 5);\r\n\r\n  return (\r\n    <div className=\"container-custom py-12\">\r\n      {/* Header */}\r\n      <div className=\"mb-12\">\r\n        <h1 className=\"text-4xl font-bold text-gray-900 mb-4\">Inventory Dashboard</h1>\r\n        <div className=\"inline-block bg-green-50 border border-green-200 rounded-lg p-4 text-sm text-green-800 flex items-center gap-2\">\r\n          <div className=\"flex-shrink-0\">\r\n            <BarChart3 size={18} />\r\n          </div>\r\n          <span><strong>This page uses SSR:</strong> Rendered on every request with live data. Perfect for real-time statistics.</span>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Statistics Cards */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12\">\r\n        <StatCard\r\n          label=\"Total Products\"\r\n          value={stats.totalProducts}\r\n          icon={Package}\r\n          color=\"bg-blue-50\"\r\n        />\r\n        <StatCard\r\n          label=\"Total Inventory\"\r\n          value={stats.totalInventory}\r\n          icon={TrendingUp}\r\n          color=\"bg-green-50\"\r\n        />\r\n        <StatCard\r\n          label=\"Low Stock Items\"\r\n          value={stats.lowStockProducts.length}\r\n          icon={AlertTriangle}\r\n          color=\"bg-yellow-50\"\r\n        />\r\n        <StatCard\r\n          label=\"Out of Stock\"\r\n          value={stats.outOfStockProducts.length}\r\n          icon={AlertCircle}\r\n          color=\"bg-red-50\"\r\n        />\r\n      </div>\r\n\r\n      {/* Categories */}\r\n      <div className=\"mb-12 bg-white rounded-lg shadow-md p-6\">\r\n        <h2 className=\"text-2xl font-bold mb-6\">Categories</h2>\r\n        <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4\">\r\n          {stats.categories.map((category) => {\r\n            const categoryProducts = products.filter((p) => p.category === category);\r\n            const categoryInventory = categoryProducts.reduce((sum, p) => sum + p.inventory, 0);\r\n\r\n            return (\r\n              <div key={category} className=\"border border-gray-200 rounded-lg p-4\">\r\n                <p className=\"text-sm text-gray-600 mb-1\">{category}</p>\r\n                <p className=\"text-2xl font-bold text-gray-900 mb-2\">{categoryProducts.length}</p>\r\n                <div className=\"w-full bg-gray-200 rounded-full h-2\">\r\n                  <div\r\n                    className=\"bg-indigo-600 h-2 rounded-full\"\r\n                    style={{\r\n                      width: `${(categoryInventory / stats.totalInventory) * 100}%`,\r\n                    }}\r\n                  />\r\n                </div>\r\n                <p className=\"text-xs text-gray-500 mt-2\">{categoryInventory} units</p>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Low Stock Alert */}\r\n      {stats.lowStockProducts.length > 0 && (\r\n        <div className=\"mb-12 bg-yellow-50 border border-yellow-200 rounded-lg p-6\">\r\n          <h2 className=\"text-2xl font-bold text-yellow-900 mb-6 flex items-center gap-2\">\r\n            <div className=\"flex-shrink-0\">\r\n              <AlertTriangle size={24} />\r\n            </div>\r\n            Low Stock Alert\r\n          </h2>\r\n          <div className=\"space-y-3\">\r\n            {stats.lowStockProducts.map((product) => (\r\n              <div key={product.id} className=\"flex justify-between items-center p-3 bg-white rounded border border-yellow-200\">\r\n                <div>\r\n                  <p className=\"font-semibold text-gray-900\">{product.name}</p>\r\n                  <p className=\"text-sm text-gray-600\">{product.category}</p>\r\n                </div>\r\n                <span className=\"px-3 py-1 bg-yellow-200 text-yellow-800 rounded-full font-semibold text-sm\">\r\n                  {product.inventory} units\r\n                </span>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Top Products */}\r\n      <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n        <h2 className=\"text-2xl font-bold mb-6\">Top Products by Value</h2>\r\n        <div className=\"overflow-x-auto\">\r\n          <table className=\"w-full\">\r\n            <thead>\r\n              <tr className=\"border-b border-gray-200\">\r\n                <th className=\"text-left py-3 px-4 font-semibold text-gray-700\">Product</th>\r\n                <th className=\"text-right py-3 px-4 font-semibold text-gray-700\">Price</th>\r\n                <th className=\"text-right py-3 px-4 font-semibold text-gray-700\">Inventory</th>\r\n                <th className=\"text-right py-3 px-4 font-semibold text-gray-700\">Total Value</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {topProducts.map((product) => (\r\n                <tr key={product.id} className=\"border-b border-gray-200 hover:bg-gray-50\">\r\n                  <td className=\"py-3 px-4\">\r\n                    <p className=\"font-medium text-gray-900\">{product.name}</p>\r\n                    <p className=\"text-sm text-gray-600\">{product.category}</p>\r\n                  </td>\r\n                  <td className=\"text-right py-3 px-4\">${product.price.toFixed(2)}</td>\r\n                  <td className=\"text-right py-3 px-4\">{product.inventory}</td>\r\n                  <td className=\"text-right py-3 px-4 font-semibold text-indigo-600\">\r\n                    ${(product.price * product.inventory).toFixed(2)}\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Info Section */}\r\n      <div className=\"mt-12 bg-blue-50 border border-blue-200 rounded-lg p-6\">\r\n        <h3 className=\"font-semibold text-blue-900 mb-2\">About Real-Time Data</h3>\r\n        <p className=\"text-sm text-blue-800\">\r\n          This dashboard fetches live inventory data on every request. Unlike static pages, SSR ensures you always see\r\n          the current state of your inventory. This is ideal for dashboards, admin panels, and any content that needs to\r\n          be fresh at all times.\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\ninterface StatCardProps {\r\n  label: string;\r\n  value: number | string;\r\n  icon: React.ComponentType<{ size: number }>;\r\n  color: string;\r\n}\r\n\r\nfunction StatCard({ label, value, icon: Icon, color }: StatCardProps) {\r\n  return (\r\n    <div className={`${color} rounded-lg p-6 border border-gray-200`}>\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <p className=\"text-sm text-gray-600 mb-1\">{label}</p>\r\n          <p className=\"text-3xl font-bold text-gray-900\">{value}</p>\r\n        </div>\r\n        <div className=\"text-gray-600\">\r\n          <Icon size={32} />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}